---
import MenuIcon from './icons/MenuIcon.astro';
import XIcon from './icons/XIcon.astro';
---

<header class="sticky top-0 z-50 bg-white shadow-md">
  <div class="container flex items-center justify-between py-4">
    <div class="text-2xl font-bold text-brand-orange">Vivenciando Mendoza</div>

    <nav class="hidden md:flex gap-8 items-center text-sm">
      <a href="#servicios" class="hover:text-brand-olive">Servicios</a>
      <a href="#experiencias" class="hover:text-brand-olive">Experiencias</a>
      <a href="#alojamiento" class="hover:text-brand-olive">Alojamiento</a>
      <a href="#contacto" class="hover:text-brand-olive">Contacto</a>
    </nav>

    <a href="#contacto" class="btn btn-primary text-sm !hidden md:inline-block">Reservar</a>

    <button id="mobile-menu-toggle" class="md:hidden p-2 text-brand-orange" aria-label="Abrir menú" aria-expanded="false">
      <MenuIcon id="menu-icon" class="h-6 w-6" />
      <XIcon id="x-icon" class="hidden h-6 w-6" />
    </button>
  </div>

  <div id="mobile-menu" class="hidden md:hidden bg-white shadow-md border-t border-gray-200">
    <nav class="flex flex-col p-4 space-y-2">
      <a href="#servicios" class="hover:text-brand-olive block p-2 rounded-md">Servicios</a>
      <a href="#experiencias" class="hover:text-brand-olive block p-2 rounded-md">Experiencias</a>
      <a href="#alojamiento" class="hover:text-brand-olive block p-2 rounded-md">Alojamiento</a>
      <a href="#contacto" class="hover:text-brand-olive block p-2 rounded-md">Contacto</a>
      
      </nav>
  </div>
</header>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const toggleButton = document.getElementById('mobile-menu-toggle');
    const mobileMenu = document.getElementById('mobile-menu');
    const menuIcon = document.getElementById('menu-icon');
    const xIcon = document.getElementById('x-icon');

    if (toggleButton && mobileMenu && menuIcon && xIcon) {
      toggleButton.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
        menuIcon.classList.toggle('hidden');
        xIcon.classList.toggle('hidden');
        
        const isExpanded = !mobileMenu.classList.contains('hidden');
        toggleButton.setAttribute('aria-expanded', String(isExpanded));
        toggleButton.setAttribute('aria-label', isExpanded ? 'Cerrar menú' : 'Abrir menú');
      });

      // Cierra el menú al hacer clic en un enlace
      mobileMenu.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', () => {
          mobileMenu.classList.add('hidden');
          menuIcon.classList.remove('hidden');
          xIcon.classList.add('hidden');
          toggleButton.setAttribute('aria-expanded', 'false');
          toggleButton.setAttribute('aria-label', 'Abrir menú');
        });
      });
    }
  });
</script>